"use strict";(self.webpackChunkmonogame_extended_website=self.webpackChunkmonogame_extended_website||[]).push([[7708],{1994:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>s,default:()=>h,frontMatter:()=>l,metadata:()=>a,toc:()=>c});var i=t(4848),o=t(8453);const l={id:"collections",title:"Collections",sidebar_label:"Collections"},s=void 0,a={id:"features/collections/collections",title:"Collections",description:"What is a collection?",source:"@site/docs/features/collections/collections.md",sourceDirName:"features/collections",slug:"/features/collections/",permalink:"/docs/features/collections/",draft:!1,unlisted:!1,editUrl:"https://github.com/craftworkgames/craftworkgames.github.io/tree/develop/docs/features/collections/collections.md",tags:[],version:"current",frontMatter:{id:"collections",title:"Collections",sidebar_label:"Collections"},sidebar:"docs",previous:{title:"Orthographic Camera",permalink:"/docs/features/camera/orthographic-camera/"},next:{title:"Object Pooling",permalink:"/docs/features/object-pooling/"}},d={},c=[{value:"What is a collection?",id:"what-is-a-collection",level:2},{value:"General requirements for all collections",id:"general-requirements-for-all-collections",level:2},{value:"Bag",id:"bag",level:2},{value:"Bag Functionality and Behavior",id:"bag-functionality-and-behavior",level:3},{value:"Bag Example",id:"bag-example",level:3},{value:"Deque",id:"deque",level:2},{value:"Deque Functionality and Behavior",id:"deque-functionality-and-behavior",level:3},{value:"Deque Example",id:"deque-example",level:3},{value:"KeyedCollection",id:"keyedcollection",level:2},{value:"Keyed Collection Functionality and Behavior",id:"keyed-collection-functionality-and-behavior",level:3},{value:"Object Pooling",id:"object-pooling",level:2},{value:"ObservableCollection",id:"observablecollection",level:2},{value:"ObservableCollection Example with Methods",id:"observablecollection-example-with-methods",level:3},{value:"ObservableCollection Example with Anonymous functions",id:"observablecollection-example-with-anonymous-functions",level:3},{value:"Extensions to existing .NET collections",id:"extensions-to-existing-net-collections",level:2},{value:"ListExtensions",id:"listextensions",level:3},{value:"DictionaryExtensions",id:"dictionaryextensions",level:3}];function r(e){const n={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h2,{id:"what-is-a-collection",children:"What is a collection?"}),"\n",(0,i.jsx)(n.p,{children:"A collection is a data structure with functionality built around it.  Think about a collection as a grouping of similar things.  All the enemies in a game, the items in the inventory, the textures being drawn, images in an animation, or bullets on the screen."}),"\n",(0,i.jsx)(n.p,{children:"Collections are more advanced than a simple array or list, and each one can provide unique functionality.  There are benefits and disadvantages to each collection type.  Don't use a collection without a reason, especially if a simple array or list will suffice.  Make sure the collection you are choosing has a purpose that is advantageous to you and your project."}),"\n",(0,i.jsx)(n.p,{children:".NET has many default Collection types (List, Dictionary, Queue, Stack, and many more).  These are a few additional collections."}),"\n",(0,i.jsx)(n.h2,{id:"general-requirements-for-all-collections",children:"General requirements for all collections"}),"\n",(0,i.jsxs)(n.p,{children:["All of these require adding the using directive for ",(0,i.jsx)(n.code,{children:"MonoGame.Extended.Collections"})," in your file."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:"using MonoGame.Extended.Collections;\n"})}),"\n",(0,i.jsx)(n.h2,{id:"bag",children:"Bag"}),"\n",(0,i.jsxs)(n.p,{children:["A ",(0,i.jsx)(n.code,{children:"Bag"})," is an un-ordered array of items with fast ",(0,i.jsx)(n.code,{children:"Add"})," and ",(0,i.jsx)(n.code,{children:"Remove"})," properties."]}),"\n",(0,i.jsx)(n.h3,{id:"bag-functionality-and-behavior",children:"Bag Functionality and Behavior"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"It is much faster than an array when removing items."}),"\n",(0,i.jsx)(n.li,{children:"Takes less space than a linked list."}),"\n",(0,i.jsx)(n.li,{children:"Bag will resize itself (grow by 1.5 times current size) only when it needs to."}),"\n",(0,i.jsx)(n.li,{children:"Used space won't shrink after removing elements."}),"\n",(0,i.jsx)(n.li,{children:"You can clear the bag."}),"\n",(0,i.jsx)(n.li,{children:"Can't sort the bag."}),"\n",(0,i.jsx)(n.li,{children:"Order is not preserved."}),"\n",(0,i.jsx)(n.li,{children:"Elements are added to the end of the collection."}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"bag-example",children:"Bag Example"}),"\n",(0,i.jsxs)(n.p,{children:["The example below creates a new ",(0,i.jsx)(n.code,{children:"Bag"})," of size 3 with type ",(0,i.jsx)(n.code,{children:"int"}),", adds three ",(0,i.jsx)(n.code,{children:"integers"})," to the bag, adds a fourth item, and removes one item. When the fourth item is added this causes a resize of the capacity by 1.5 times the current capacity."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:"var bag = new Bag<int>(3);\nbag.Add(4);\nbag.Add(8);\nbag.Add(15);\n// bag is now [4, 8, 15]\n\nbag.Add(16); \n// bag is extended here, capacity is now 4 instead of 3 with items [4, 8, 15, 16]\n\nbag.RemoveAt(1);\n// bag is now [4, 16, 15] with a capacity of 4\n\nbag.Remove(4);\n// bag is now [15, 16] with a capacity of 4\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Notice in the example when we removed the the second element (value 8) with ",(0,i.jsx)(n.code,{children:"RemoveAt(1)"})," the last item (value 16) moved to it's place.  This is because when an item is removed the ",(0,i.jsx)(n.code,{children:"bag"})," will reposition the last element into the removed spot.  This is to prevent the code from needing to move every element in the bag.  Meaning, ",(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.em,{children:"do not count on the order of the items in the bag!"})})]}),"\n",(0,i.jsxs)(n.p,{children:["This happens again when we use ",(0,i.jsx)(n.code,{children:"Remove"})," to look for a specific VALUE in the bag, and remove that item.  15, the last element is swapped into the removed spot."]}),"\n",(0,i.jsx)(n.h2,{id:"deque",children:"Deque"}),"\n",(0,i.jsxs)(n.p,{children:["Represents a collection of objects in which elements can be added to or removed either from the front or back. See ",(0,i.jsx)(n.a,{href:"https://en.wikipedia.org/wiki/Double-ended_queue",children:"double ended queue"}),"."]}),"\n",(0,i.jsx)(n.h3,{id:"deque-functionality-and-behavior",children:"Deque Functionality and Behavior"}),"\n",(0,i.jsxs)(n.p,{children:["The front of the queue is the first item removed when you ",(0,i.jsx)(n.code,{children:"Pop"})," an item off (The left of the list), where-as the back is the last item removed with ",(0,i.jsx)(n.code,{children:"Pop"})," (The right of the list)."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"[3, 6, 8, 9, 0, 5, 32]\n"})}),"\n",(0,i.jsx)(n.p,{children:"In the above list of elements, the 3 is the back, and the 32 is the front."}),"\n",(0,i.jsx)(n.h3,{id:"deque-example",children:"Deque Example"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:"var deque = new Deque<int>();\ndeque.AddToBack(1);\ndeque.AddToBack(2);\ndeque.AddToFront(4);\ndeque.AddToFront(5);\ndeque.AddToBack(3);\n\nwhile (deque.Count > 0)\n{\n    int item = deque.Pop();\n    Console.WriteLine(item);\n}\n\n"})}),"\n",(0,i.jsx)(n.p,{children:"Result"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"3\n2\n1\n4\n5\n"})}),"\n",(0,i.jsx)(n.h2,{id:"keyedcollection",children:"KeyedCollection"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"KeyedCollection"})," is a wrapper around the ",(0,i.jsx)(n.code,{children:"Dictionary"})," class where the key is obtained by a ",(0,i.jsx)(n.a,{href:"https://www.tutorialspoint.com/csharp/csharp_delegates.htm",children:"delegate"}),"."]}),"\n",(0,i.jsx)(n.p,{children:"This allows you to use a function as the key.  While this could be any function, a good example would be using a property of the class in the collection as the key, like an ID field."}),"\n",(0,i.jsx)(n.h3,{id:"keyed-collection-functionality-and-behavior",children:"Keyed Collection Functionality and Behavior"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"The delegate function needs to return a unique value for the key since it will be used as the dictionaries key."}),"\n",(0,i.jsx)(n.li,{children:"Simplify adding an Entity to a dictionary by a key value that's inside the Entity."}),"\n",(0,i.jsxs)(n.li,{children:["Provide helper methods to search for items in the collection ",(0,i.jsx)(n.code,{children:"TryGetValue"})]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Lets create an object we can use in the keyed collection."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:"public class MyEntity \n{\n    public int Id {get; set;}\n    public string Name {get; set;}\n\n    public MyEntity() { }\n\n    public MyEntity(int id, string name)\n    {\n        this.Id = id;\n        this.Name = name;\n    }\n}\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Now lets use that in the ",(0,i.jsx)(n.code,{children:"KeyedCollection"}),"."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:'var keyedCollection = new KeyedCollection<int, MyEntity>(e => e.Id);\nkeyedCollection.Add(new MyEntity (1, "Player1"));\nkeyedCollection.Add(new MyEntity {Id = 2, Name = "Player2"});\n\nkeyedCollection.TryGetValue(1, out MyEntity entity); // gets Player1\n'})}),"\n",(0,i.jsxs)(n.p,{children:["Above we created a new KeyedCollection using the ",(0,i.jsx)(n.code,{children:"Id"})," field as the key, and storing the ",(0,i.jsx)(n.code,{children:"MyEntity"})," as the value.  In the example we added two new instances for MyEntity, and then retrieved an item from the collection using the ID field."]}),"\n",(0,i.jsx)(n.h2,{id:"object-pooling",children:"Object Pooling"}),"\n",(0,i.jsx)(n.p,{children:"Pooling of Objects allows reuse of memory for a group of items to avoid Garbage Collection.  These are a bit more advanced, and an entire page is dedicated to them."}),"\n",(0,i.jsxs)(n.p,{children:["More information is in the ",(0,i.jsx)(n.a,{href:"/docs/features/object-pooling/",children:"Object Pooling"})," documentation."]}),"\n",(0,i.jsx)(n.h2,{id:"observablecollection",children:"ObservableCollection"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"ObservableCollection<T>"})," manages an ",(0,i.jsx)(n.code,{children:"IList<T>"})," of items firing ",(0,i.jsx)(n.code,{children:"ItemAdded"}),", ",(0,i.jsx)(n.code,{children:"ItemRemoved"}),", ",(0,i.jsx)(n.code,{children:"Clearing"}),", and ",(0,i.jsx)(n.code,{children:"Cleared"})," events when the collection is changed."]}),"\n",(0,i.jsx)(n.p,{children:"This allows you to monitor when items are added, removed, being clearing, or cleared.  You could then perform an action whenever this happens.  If you're familiar with databases, this would be similar to insert/update/delete triggers."}),"\n",(0,i.jsxs)(n.p,{children:["It's for a more ",(0,i.jsx)(n.a,{href:"https://en.wikipedia.org/wiki/Event-driven_programming",children:"event-driven architecture"})," common in GUIs."]}),"\n",(0,i.jsx)(n.h3,{id:"observablecollection-example-with-methods",children:"ObservableCollection Example with Methods"}),"\n",(0,i.jsxs)(n.p,{children:["In this first example, we'll create a blank ",(0,i.jsx)(n.code,{children:"ObservableCollection<int>"}),", then add, remove, and clear from it to demonstrate the Event Handlers."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:"ObservableCollection<int> observableCollection = new ObservableCollection<int>();\n"})}),"\n",(0,i.jsx)(n.p,{children:"Next, we need to create some methods that will handle the events"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:'public void ItemAddedWatcher(object sender, ItemEventArgs<int> e)\n{\n    Debug.Print($"Item Added: {e.Item}");\n}\n\npublic void ItemRemovedWatcher(object sender, ItemEventArgs<int> e)\n{\n    Debug.Print($"Item Removed: {e.Item}");\n}\n\npublic void WatchedListClearing(object sender, EventArgs args)\n{\n    Debug.Print("List is clearing....");\n}\n\npublic void WatchedListCleared(object sender, EventArgs args)\n{\n    Debug.Print("List is now cleared!");\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:"Now we need to wire-up (associate) the event handlers to the methods so they are connected."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:"observableCollection.ItemAdded += ItemAddedWatcher;\nobservableCollection.ItemRemoved += ItemRemovedWatcher;\nobservableCollection.Clearing += WatchedListClearing;\nobservableCollection.Cleared += WatchedListCleared;\n"})}),"\n",(0,i.jsx)(n.p,{children:"Finally we need to manipulate the ObservableCollection so we can watch the events get triggered"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:"observableCollection.Add(1);\nobservableCollection.Add(2);\nobservableCollection.Add(77);\nobservableCollection.Add(3);\nobservableCollection.Remove(2);\nobservableCollection.Add(42);\nobservableCollection.Clear();\n"})}),"\n",(0,i.jsx)(n.p,{children:"The output should be"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Item Added: 1\nItem Added: 2\nItem Added: 77\nItem Added: 3\nItem Removed: 2\nItem Added: 42\nList is clearing....\nList is now cleared!\n"})}),"\n",(0,i.jsx)(n.h3,{id:"observablecollection-example-with-anonymous-functions",children:"ObservableCollection Example with Anonymous functions"}),"\n",(0,i.jsxs)(n.p,{children:["In this example we will pass in an already existing collection (A list), and use ",(0,i.jsx)(n.code,{children:"Anonymous functions"})," in-line."]}),"\n",(0,i.jsx)(n.p,{children:"Create a list, and then pass it to an ObservableCollection with the same data type."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:"List<int> sourceList = new List<int> {1, 2, 3, 55, 88, 13, 23, 42 };\nObservableCollection<int> observableCollectionAlt = new ObservableCollection<int>(sourceList);\n"})}),"\n",(0,i.jsx)(n.p,{children:"Wire-up (associate) all the event handlers to the anonymous functions"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:'observableCollectionAlt.ItemAdded += (sender, e) =>\n{\n    Debug.Print($"Item Added: {e.Item}");\n};\nobservableCollectionAlt.ItemRemoved += (sender, e) =>\n{\n    Debug.Print($"Item Removed: {e.Item}");\n};\nobservableCollectionAlt.Clearing += (sender, args) =>\n{\n    Debug.Print("List is clearing....");\n};\nobservableCollectionAlt.Cleared += (sender, args) =>\n{\n    Debug.Print("List is now cleared!");\n};\n'})}),"\n",(0,i.jsx)(n.p,{children:"Perform some changes to the ObservableCollection and you'll see debug prints."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:"observableCollectionAlt.Add(7);\nobservableCollectionAlt.Add(412);\nobservableCollectionAlt.Remove(88);\nobservableCollectionAlt.RemoveAt(3);\nobservableCollectionAlt.Clear();\n"})}),"\n",(0,i.jsx)(n.p,{children:"This will print out the following:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Item Added: 7\nItem Added: 412\nItem Removed: 88\nItem Removed: 55\nList is clearing....\nList is now cleared!\n"})}),"\n",(0,i.jsx)(n.h2,{id:"extensions-to-existing-net-collections",children:"Extensions to existing .NET collections"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"MonoGame.Extended"})," contains ",(0,i.jsx)(n.code,{children:"Collections"})," extensions to the C# collections that are useful for game programming.  An ",(0,i.jsx)(n.a,{href:"https://learn.microsoft.com/en-us/dotnet/csharp/programming-guide/classes-and-structs/extension-methods",children:"extension"})," in .NET is essentially just adding additional functionality to an existing Type Class, without needing to re-compile the source code for .NET 8.0.  Read more about them in the link above."]}),"\n",(0,i.jsx)(n.h3,{id:"listextensions",children:"ListExtensions"}),"\n",(0,i.jsxs)(n.p,{children:["Adds ",(0,i.jsx)(n.code,{children:"Shuffle(Random)"})," to all ",(0,i.jsx)(n.code,{children:"IList<>"})," classes.  This extension requires that you pass in an instance of the ",(0,i.jsx)(n.code,{children:"System.Random"})," class."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:"// .... setup example \nusing System;\nusing System.Collections.Generic;\n\nRandom random = new Random();\nList<int> nums = new List<int>{1, 2, 3, 4, 5};\n// .... end setup example \n\nusing MonoGame.Extended.Collections;\n// The Extension method for List `Shuffle` called\nnums.Shuffle(random);\n"})}),"\n",(0,i.jsxs)(n.p,{children:["The list ",(0,i.jsx)(n.code,{children:"nums"})," will now be randomly shuffled.  We didn't have to recompile .NET either."]}),"\n",(0,i.jsx)(n.h3,{id:"dictionaryextensions",children:"DictionaryExtensions"}),"\n",(0,i.jsxs)(n.p,{children:["Extends all ",(0,i.jsx)(n.code,{children:"Dictionary<>"})," classes with ",(0,i.jsx)(n.code,{children:"GetValueOrDefault(key, default)"}),".  It allows you to specify a default to return when the key is not found."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:'// .... setup example \nusing System.Collections.Generic;\n\nDictionary<string, int> zipCodeLookupByCity = new Dictionary<string, int>();\n// .... end setup example \n\nusing MonoGame.Extended.Collections;\n// The Extension method for dictionary to return a default if no key found\nint zipCode = zipCodeLookupByCity.GetValueOrDefault("typo city name", 90210);\n'})}),"\n",(0,i.jsx)(n.p,{children:"The above code has a made up situation where we want to be able to lookup zipcodes (Postal Codes) by the city name.  In this case, someone typed the city name wrong, but we want to always default the zip code to Beverly Hills zip code of 90210."})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(r,{...e})}):r(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>a});var i=t(6540);const o={},l=i.createContext(o);function s(e){const n=i.useContext(l);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),i.createElement(l.Provider,{value:n},e.children)}}}]);